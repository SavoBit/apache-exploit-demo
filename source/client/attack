#!/bin/bash

. /etc/attackd.conf

[[ $ATTACK_LOG ]] || { echo "Missing var ATTACK_LOG"; }
[[ $ATTACK_DEBUG ]] || { echo "Missing var ATTACK_DEBUG"; }
[[ $ATTACK_LOCK ]] || { echo "Missing var ATTACK_LOCK"; }
[[ $ATTACK_RUN ]] || { echo "Missing var ATTACK_RUN"; }

action=$1

usage="Usage:$0 (start|stop|watch|debug)"

[[ $action ]] || { echo $usage; exit 2; }

[ "$action" == "start" ] && { touch $ATTACK_RUN; exit 0; }
[ "$action" == "stop" ] && { rm $ATTACK_RUN; exit 0; }
[ "$action" == "watch" ] && { tail -f $ATTACK_LOG; exit 0; }
[ "$action" == "debug" ] && { tail -f $ATTACK_DEBUG; exit 0; }

echo $usage; exit 2;
